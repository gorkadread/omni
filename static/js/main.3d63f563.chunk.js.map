{"version":3,"sources":["SubmitTransaction.jsx","TransactionHistory.jsx","App.js","reportWebVitals.js","index.js"],"names":["SubmitTransaction","useState","transactionAmount","setTransactionAmount","accountId","setAccountId","error","setError","onSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","json","data","socket","emit","className","onChange","target","value","placeholder","type","TransactionHistory","transactionsState","setTransactions","loading","setLoading","messageHandler","transactions","i","length","toFrom","amount","fMessage","account_id","useEffect","on","resp","updatedTransactions","map","transaction","balance_after","transaction_id","io","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kRAmEeA,EAhEW,WACxB,MAAkDC,mBAAS,IAA3D,mBAAOC,EAAP,KAA0BC,EAA1B,KACA,EAAkCF,mBAAS,IAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAA0BJ,mBAAS,IAAnC,mBAAOK,EAAP,KAAcC,EAAd,KAEMC,EAAQ,iDAAG,WAAOC,GAAP,kFACfA,EAAEC,iBADa,kBAIGC,MAAM,gBAAiB,CACrCC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACnB,WAAcZ,EACd,OAAUF,MAEXe,MAAK,SAAAC,GAAQ,OAAIA,EAASC,OAC1BF,MAAK,SAAAG,GAEJC,EAAOC,KAAK,mBAAoB,CAAE,KAAQ,CAAEF,UAE5Cf,EAAa,IACbF,EAAqB,UAjBZ,8DAqBbI,EAAS,mDArBI,yDAAH,sDAyBd,OAAO,gCACL,wBAAQgB,UAAU,oBAAlB,oCAEA,qBAAKA,UAAU,QAAf,SAAwBjB,IACxB,uBAAME,SAAUA,EAAhB,UACE,gDAEE,uBACA,uBAAO,YAAU,aAAagB,SAAU,SAACf,GACvCJ,EAAaI,EAAEgB,OAAOC,OACtBnB,EAAS,KAETmB,MAAOtB,EACPuB,YAAY,wBAGhB,uBACA,4CAEE,uBACA,uBAAO,YAAU,SAASH,SAAU,SAACf,GACnCN,EAAqBM,EAAEgB,OAAOC,OAC9BnB,EAAS,KAETmB,MAAOxB,EACPyB,YAAY,6BAGhB,uBACA,uBAAO,YAAU,qBAAqBC,KAAK,kBCDlCC,EA1DY,WACzB,MAA6C5B,mBAAS,IAAtD,mBAAO6B,EAAP,KAA0BC,EAA1B,KACA,EAA8B9B,oBAAS,GAAvC,mBAAO+B,EAAP,KAAgBC,EAAhB,KAGMC,EAAiB,SAACC,GACtB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAaE,OAAQD,IAAK,CAC5C,IAAIE,EAASH,EAAaC,GAAGG,OAAS,EAAI,KAAO,OACjDJ,EAAaC,GAAGI,SAAhB,sBAA0CL,EAAaC,GAAGG,OAA1D,aAAqED,EAArE,oBAAuFH,EAAaC,GAAGK,WAAvG,KAGFV,EAAgBI,GAChBF,GAAW,IAmBb,OAhBAS,qBAAU,WAGRrB,EAAOsB,GAAG,4BAA4B,SAACC,GACrC,IAAIC,EAAsBD,EAAKxB,KAC/Bc,EAAeW,MAGjBlC,MAAM,kBACHM,MAAK,SAAAC,GAAQ,OAAIA,EAASC,OACxBF,MAAK,SAAAG,GACJc,EAAed,WAGpB,IAECY,EACK,gCACL,wBAAQT,UAAU,oBAAlB,iCADK,+BAIHO,EAAkBO,OAAS,EACtB,gCACL,wBAAQd,UAAU,oBAAlB,iCACCO,EAAkBgB,KAAI,SAACC,GAAD,OACrB,sBAAKxB,UAAU,cACb,YAAU,cACV,kBAAiBwB,EAAYN,WAC7B,cAAaM,EAAYR,OACzB,eAAcQ,EAAYC,cAJ5B,UAKGD,EAAYP,SACb,uBANF,kCAOkCO,EAAYC,cAP9C,OAAkCD,EAAYE,sBAa3C,wD,QClDA5B,EAAS6B,YAAG,yBAiBVC,MAdf,WACE,OACE,sBAAK5B,UAAU,OAAf,UACE,wBAAQA,UAAU,cAAlB,SACE,2CAEF,sBAAKA,UAAU,cAAf,UACE,qBAAKA,UAAU,4BAAf,SAA2C,cAAC,EAAD,MAC3C,qBAAKA,UAAU,6BAAf,SAA4C,cAAC,EAAD,aCLrC6B,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBrC,MAAK,YAAkD,IAA/CsC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.3d63f563.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { socket } from './App'\n\nconst SubmitTransaction = () => {\n  const [transactionAmount, setTransactionAmount] = useState(\"\");\n  const [accountId, setAccountId] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      let res = await fetch('/transactions', {\n        method: \"POST\",\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          'account_id': accountId,\n          'amount': transactionAmount\n        }),\n      }).then(response => response.json()\n        .then(data => {\n          // Trigger a realtime socket-call instead of this nasty props-business\n          socket.emit('TransactionAdded', { 'data': { data } });\n\n          setAccountId(\"\");\n          setTransactionAmount(\"\");\n        })\n      );\n    } catch (err) {\n      setError('Something went wrong. Please check your inputs!');\n    }\n  };\n\n  return <div>\n    <header className=\"bank-child-header\">Submit new transaction</header>\n\n    <div className=\"error\">{error}</div>\n    <form onSubmit={onSubmit}>\n      <label>\n        Account ID:\n        <br />\n        <input data-type=\"account-id\" onChange={(e) => {\n          setAccountId(e.target.value);\n          setError('');\n        }}\n          value={accountId}\n          placeholder=\"Enter account ID\"\n        />\n      </label>\n      <br />\n      <label>\n        Amount:\n        <br />\n        <input data-type=\"amount\" onChange={(e) => {\n          setTransactionAmount(e.target.value);\n          setError('');\n        }}\n          value={transactionAmount}\n          placeholder=\"Enter transfer amount\"\n        />\n      </label>\n      <br />\n      <input data-type=\"transaction-submit\" type=\"submit\" />\n    </form>\n  </div>\n};\n\nexport default SubmitTransaction;","import React, { useState, useEffect } from \"react\";\nimport { socket } from './App'\n\nconst TransactionHistory = () => {\n  const [transactionsState, setTransactions] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Compiles the friendly message of transactions performed\n  const messageHandler = (transactions) => {\n    for (var i = 0; i < transactions.length; i++) {\n      let toFrom = transactions[i].amount > 0 ? 'to' : 'from';\n      transactions[i].fMessage = `Transferred ${transactions[i].amount}$ ${toFrom} account ${transactions[i].account_id}.`;\n    }\n\n    setTransactions(transactions);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    // Subscribe to the added transactions socket\n    // This way we save a couple of rerenders and the code is much cleaner\n    socket.on('transactionAddedResponse', (resp) => {\n      let updatedTransactions = resp.data;\n      messageHandler(updatedTransactions);\n    })\n\n    fetch(\"/transactions/\")\n      .then(response => response.json()\n        .then(data => {\n          messageHandler(data)\n        })\n      )\n  }, []);\n\n  if (loading) {\n    return <div>\n      <header className=\"bank-child-header\">Transaction history</header>\n      'Loading transactions...'</div>\n  } else {\n    if (transactionsState.length > 0) {\n      return <div>\n        <header className=\"bank-child-header\">Transaction history</header>\n        {transactionsState.map((transaction) => (\n          <div className=\"transaction\" key={transaction.transaction_id}\n            data-type=\"transaction\"\n            data-account-id={transaction.account_id}\n            data-amount={transaction.amount}\n            data-balance={transaction.balance_after}>\n            {transaction.fMessage}\n            < br />\n            The current account balance is {transaction.balance_after}$.\n          </div>\n        ))}\n\n      </div >\n    } else {\n      return <div>No transactions yet.</div>\n    }\n  }\n};\n\nexport default TransactionHistory;","import './App.css';\nimport React, { useState } from \"react\";\nimport SubmitTransaction from \"./SubmitTransaction\";\nimport TransactionHistory from \"./TransactionHistory\";\nimport io from 'socket.io-client';\n\nexport const socket = io('http://127.0.0.1:5000');\n\n\nfunction App() {\n  return (\n    <div className=\"bank\">\n      <header className=\"bank-header\">\n        <p>The Bank</p>\n      </header>\n      <div className=\"flex-parent\">\n        <div className=\"flex-child bank-left-side\"><SubmitTransaction /></div>\n        <div className=\"flex-child bank-right-side\"><TransactionHistory /></div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}